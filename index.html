<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå°‚ç”¨ãƒšãƒ¼ã‚¸</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¬</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ã‚·ãƒƒã‚¯', 'Yu Gothic UI', 'Meiryo UI', sans-serif;
            background: linear-gradient(135deg, #f5f3f0 0%, #e8f5e8 100%);
            min-height: 100vh;
            line-height: 1.6;
            color: #4a5568;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .logo-area {
            width: 140px;
            height: 90px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 40px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            color: white;
            position: relative;
            line-height: 1.3;
        }
        
        .logo-area::before {
            content: 'ğŸ¬';
            position: absolute;
            top: -5px;
            right: 10px;
            font-size: 24px;
        }

        .title {
            font-size: 28px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 16px;
            color: #718096;
            margin-bottom: 20px;
        }

        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .feature-tag {
            background: #e6f3e6;
            color: #2f855a;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 15px;
        }

        .required {
            color: #e53e3e;
            font-size: 12px;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .form-input:focus {
            outline: none;
            border-color: #81c784;
            background: white;
            box-shadow: 0 0 0 3px rgba(129, 199, 132, 0.1);
        }

        .upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 16px;
            padding: 40px 20px;
            text-align: center;
            background: #f7fafc;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .upload-area.dragover {
            border-color: #81c784;
            background: #f0fff4;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 48px;
            color: #a0aec0;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 18px;
            color: #4a5568;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .upload-subtext {
            font-size: 14px;
            color: #718096;
            margin-bottom: 15px;
        }

        .file-input {
            display: none;
        }

        .file-info {
            background: #e6f3e6;
            border-radius: 12px;
            padding: 12px;
            margin-top: 10px;
            display: none;
        }

        .file-name {
            font-weight: 600;
            color: #2f855a;
            margin-bottom: 5px;
        }

        .file-size {
            font-size: 14px;
            color: #68d391;
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #81c784, #66bb6a);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(129, 199, 132, 0.3);
        }
        
        .submit-btn.loading {
            background-color: #bdbdbd;
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        .submit-btn.loading::after {
            content: '...';
            display: inline-block;
            animation: loadingDots 1.5s infinite;
        }
        
        @keyframes loadingDots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .submit-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .thanks-screen {
            display: none;
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 50px 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .thanks-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .thanks-title {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .thanks-message {
            font-size: 16px;
            color: #4a5568;
            margin-bottom: 25px;
        }

        .completion-info {
            background: #fef5e7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .completion-title {
            font-weight: 600;
            color: #744210;
            margin-bottom: 8px;
        }

        .completion-text {
            font-size: 14px;
            color: #975a16;
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 25px 15px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .form-container {
                padding: 25px 20px;
            }
            
            .upload-area {
                padding: 30px 15px;
            }
        }

        .error-message {
            color: #e53e3e;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #81c784, #66bb6a);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-area">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ<br>å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</div>
            <h1 class="title">å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸</h1>
            <p class="subtitle">
                æ’®å½±ã—ãŸå‹•ç”»ï¼ˆ5ã€œ10ç§’ç¨‹åº¦ï¼‰ã‚’ã€æŒ‡å®šã®Google Driveãƒ•ã‚©ãƒ«ãƒ€ã«ç›´æ¥ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ğŸ˜Š<br>
                <small style="color: #68d391; font-weight: 600;">ğŸ“ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå‹•ç”»ã¯å®‰å…¨ã«ä¿å­˜ã•ã‚Œã¾ã™</small>
            </p>
            <div class="features">
                <span class="feature-tag">âœ… æœ€å¤§5å‹•ç”»ã¾ã§</span>
                <span class="feature-tag">âœ… 5ã€œ10ç§’ç¨‹åº¦</span>
                <span class="feature-tag">âœ… é«˜ç”»è³ªä¿å­˜</span>
            </div>
        </div>

        <form id="uploadForm" class="form-container">
            <div class="form-group">
                <label class="form-label">
                    ãŠåº—ã®åå‰ <span class="required">*å¿…é ˆ</span>
                </label>
                <input type="text" class="form-input" id="userName" name="userName" placeholder="åº—èˆ—åãƒ»æ‹…å½“è€…åã‚’ã”å…¥åŠ›ãã ã•ã„" required>
                <div class="error-message" id="userNameError">ãŠåº—ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    å‹•ç”»ã®èª¬æ˜ <span class="required">*å¿…é ˆ</span>
                </label>
                <textarea class="form-input" id="videoDescription" name="videoDescription" rows="4" placeholder="ä¾‹ï¼‰åº—å†…ã®æ§˜å­ã€ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼åï¼‰" required></textarea>
                <div class="error-message" id="videoDescriptionError">å‹•ç”»ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ« <span class="required">*å¿…é ˆ</span> <span style="font-size: 12px; color: #68d391;">(æœ€å¤§5å‹•ç”»ã¾ã§)</span>
                </label>
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">ğŸ¬</div>
                    <div class="upload-text">ã“ã“ã«å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—</div>
                    <div class="upload-subtext">ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</div>
                    <div class="upload-subtext" style="font-size: 12px; color: #a0aec0;">
                        ğŸ“± å‹•ç”»: 5ã€œ10ç§’ç¨‹åº¦<br>
                        ğŸï¸ å¯¾å¿œå½¢å¼: MP4, MOV (1å‹•ç”»200MBã¾ã§)
                    </div>
                </div>
                <input type="file" class="file-input" id="videoFile" name="videoFile" accept="video/*" multiple required>
                
                <div id="filesList" style="margin-top: 15px;"></div>
                
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="error-message" id="videoFileError">å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                ğŸ¬ å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
            </button>
        </form>

        <div class="thanks-screen" id="thanksScreen">
            <div class="thanks-icon">ğŸ‰</div>
            <h2 class="thanks-title">ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
            <p class="thanks-message">
                å‹•ç”»ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸã€‚<br>
                <strong style="color: #2f855a;">ğŸ“ Google Driveã«å®‰å…¨ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸ</strong><br>
                ç¢ºèªå¾Œã€ã”é€£çµ¡ã„ãŸã—ã¾ã™ğŸ“©
            </p>
            
            <div class="completion-info">
                <div class="completion-title">ğŸ“¸ ä»Šå¾Œã®æµã‚Œ</div>
                <div class="completion-text">
                    ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå‹•ç”»ã‚’ç¢ºèªå¾Œã€æ‹…å½“è€…ã‚ˆã‚Šã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚<br>
                    ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
                </div>
            </div>
        </div>
    </div>

    <!-- Google API Client Library -->
    <script src="https://apis.google.com/js/api.js?onload=onGAPILoad" onerror="handleScriptError('Google API')"></script>
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client?onload=onGISLoad" onerror="handleScriptError('Google Identity Services')"></script>
    
    <script>
        // ================================================
        // ğŸ”§ è¨­å®š - ã“ã“ã«ã‚ãªãŸã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
        // ================================================
        
        // TODO: ã“ã“ã«ã‚ãªãŸã®Google API Keyã‚’å…¥åŠ›
        const API_KEY = 'AIzaSyCH2IAbtvQI0ONUv43HvHvnCLiwiSi5iwg';
        
        // TODO: ã“ã“ã«ã‚ãªãŸã®Google OAuth 2.0 Client IDã‚’å…¥åŠ›
        const CLIENT_ID = '512329280979-o3762jl3r2taaa81k12ac8u00hv2qqhd.apps.googleusercontent.com';
        
        // TODO: ã“ã“ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å…ˆã®Google Drive ãƒ•ã‚©ãƒ«ãƒ€IDã‚’å…¥åŠ›
        const UPLOAD_FOLDER_ID = '1XFU7kni7SCMyYmVR_XjqWJ7aH8wv4v0E';
        
        // ================================================
        // Google Drive APIè¨­å®šï¼ˆå¤‰æ›´ä¸è¦ï¼‰
        // ================================================
        const DISCOVERY_DOC = 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest';
        const SCOPES = 'https://www.googleapis.com/auth/drive.file';
        
        // ================================================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // ================================================
        let tokenClient = null;
        let gapiInited = false;
        let gisInited = false;
        
        // ================================================
        // ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        // ================================================
        function handleScriptError(scriptName) {
            console.error(`${scriptName} ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ`);
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.textContent = `${scriptName} èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼`;
                submitBtn.style.background = '#e53e3e';
                submitBtn.classList.remove('loading');
            }
            alert(`${scriptName} ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nä»¥ä¸‹ã‚’ãŠè©¦ã—ãã ã•ã„ï¼š\nâ€¢ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰\nâ€¢ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª\nâ€¢ åºƒå‘Šãƒ–ãƒ­ãƒƒã‚«ãƒ¼ã‚’ç„¡åŠ¹åŒ–`);
        }

        // Google API Client ãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥
        function onGAPILoad() {
            window.gapiLoaded = true;
            console.log('Google API Client ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
            
            if (document.readyState === 'complete' || document.readyState === 'interactive') {
                initializeGoogleAPIs();
            }
        }
        
        // Google Identity Services ãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥
        function onGISLoad() {
            window.gisLoaded = true;
            console.log('Google Identity Services ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
            
            if (document.readyState === 'complete' || document.readyState === 'interactive') {
                initializeGoogleAPIs();
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®åˆæœŸåŒ–
        window.gapiLoaded = false;
        window.gisLoaded = false;
        window.googleAPIsInitialized = false;
        
        // ================================================
        // Google APIs ã®åˆæœŸåŒ–
        // ================================================
        function initializeGoogleAPIs() {
            // è¨­å®šå€¤ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (API_KEY === 'YOUR_API_KEY_HERE' || CLIENT_ID === 'YOUR_CLIENT_ID_HERE' || UPLOAD_FOLDER_ID === 'YOUR_FOLDER_ID_HERE') {
                console.error('API_KEYã€CLIENT_IDã€UPLOAD_FOLDER_IDãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
                const submitBtn = document.getElementById('submitBtn');
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'APIè¨­å®šãŒå¿…è¦ã§ã™';
                    submitBtn.style.background = '#e53e3e';
                    submitBtn.classList.remove('loading');
                }
                alert('è¨­å®šãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“ã€‚\n\nã‚³ãƒ¼ãƒ‰ã®å…ˆé ­éƒ¨åˆ†ã§ä»¥ä¸‹ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š\nâ€¢ API_KEY\nâ€¢ CLIENT_ID\nâ€¢ UPLOAD_FOLDER_ID');
                return;
            }
            
            // ä¸¡æ–¹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
            if (!window.gapiLoaded || !window.gisLoaded) {
                console.log('Google API ã¾ãŸã¯ Google Identity Services ã®èª­ã¿è¾¼ã¿ã‚’å¾…æ©Ÿä¸­...');
                return;
            }
            
            // ã™ã§ã«åˆæœŸåŒ–æ¸ˆã¿ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (window.googleAPIsInitialized) {
                console.log('Google APIs ã¯æ—¢ã«åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã™');
                return;
            }
            
            console.log('Google APIs ã®åˆæœŸåŒ–ã‚’é–‹å§‹ã—ã¾ã™...');
            
            // Google API Client ã®åˆæœŸåŒ–
            gapi.load('client:auth2', {
                callback: function() {
                    console.log('Google API Client ã®åˆæœŸåŒ–ã‚’é–‹å§‹ã—ã¾ã™');
                    
                    gapi.client.init({
                        'apiKey': API_KEY,
                        'discoveryDocs': [DISCOVERY_DOC],
                        'clientId': CLIENT_ID,
                        'scope': SCOPES
                    }).then(function() {
                        console.log('Google API Client ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸ');
                        gapiInited = true;
                        
                        // Google Identity Services ã®åˆæœŸåŒ–
                        try {
                            tokenClient = google.accounts.oauth2.initTokenClient({
                                client_id: CLIENT_ID,
                                scope: SCOPES,
                                callback: ''
                            });
                            console.log('Google Identity Services ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸ');
                            gisInited = true;
                            window.googleAPIsInitialized = true;
                            maybeEnableButtons();
                        } catch (error) {
                            console.error('Google Identity Services ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                            onGisError(error);
                        }
                    }, function(error) {
                        console.error('Google API Client ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                        onGapiError(error);
                    });
                },
                onerror: function(error) {
                    console.error('Google API Client ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
                    onGapiError(error);
                },
                timeout: 10000,
                ontimeout: function() {
                    const error = new Error('Google API Client ã®èª­ã¿è¾¼ã¿ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                    console.error(error.message);
                    onGapiError(error);
                }
            });
        }
        
        // ================================================
        // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        // ================================================
        function onGapiError(error) {
            console.error('Google API ã‚¨ãƒ©ãƒ¼:', error);
            let errorMessage = 'Google API ã®åˆæœŸåŒ–ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
            
            if (error.status === 403) {
                errorMessage += '\n\nAPIã‚­ãƒ¼ãŒç„¡åŠ¹ã‹ã€å¿…è¦ãªAPIãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚';
            } else if (error.status === 0) {
                errorMessage += '\n\nãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚‹ã‹ã€APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«åˆ°é”ã§ãã¾ã›ã‚“ã€‚';
            } else if (error.result && error.result.error) {
                errorMessage += `\n\nã‚¨ãƒ©ãƒ¼: ${error.result.error.message}`;
            } else if (error.message && error.message.includes('ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ')) {
                errorMessage = 'Google API ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚\n\nä»¥ä¸‹ã‚’ãŠè©¦ã—ãã ã•ã„ï¼š\nâ€¢ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆF5ã‚­ãƒ¼ï¼‰\nâ€¢ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª\nâ€¢ åºƒå‘Šãƒ–ãƒ­ãƒƒã‚«ãƒ¼ã‚’ç„¡åŠ¹åŒ–';
            }
            
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.textContent = 'ã‚¨ãƒ©ãƒ¼: ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„';
                submitBtn.style.background = '#e53e3e';
                submitBtn.classList.remove('loading');
            }
            
            alert(errorMessage);
        }
        
        function onGisError(error) {
            console.error('Google Identity Services ã‚¨ãƒ©ãƒ¼:', error);
            alert('Google Identity Services ã®åˆæœŸåŒ–ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\nâ– ã‚¨ãƒ©ãƒ¼å†…å®¹â– \n' + (error.message || JSON.stringify(error)));
        }
        
        // ================================================
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        // ================================================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM ã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ã¾ã—ãŸ');
            
            // åˆæœŸçŠ¶æ…‹ã§ã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Google Drive APIã«æ¥ç¶šä¸­...';
                submitBtn.classList.add('loading');
            }
            
            // Google API ã¨ Google Identity Services ã®èª­ã¿è¾¼ã¿çŠ¶æ…‹ã‚’ç¢ºèª
            if (window.gapiLoaded && window.gisLoaded) {
                initializeGoogleAPIs();
            } else {
                const checkInterval = setInterval(() => {
                    if (window.gapiLoaded && window.gisLoaded) {
                        clearInterval(checkInterval);
                        initializeGoogleAPIs();
                    }
                }, 100);
                
                // 30ç§’çµŒã£ã¦ã‚‚åˆæœŸåŒ–ã•ã‚Œãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼
                setTimeout(() => {
                    if (!window.googleAPIsInitialized) {
                        clearInterval(checkInterval);
                        const error = new Error('Google APIs ã®åˆæœŸåŒ–ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚');
                        console.error(error.message);
                        onGapiError(error);
                    }
                }, 30000);
            }
        });
        
        // ================================================
        // APIã®åˆæœŸåŒ–çŠ¶æ…‹ã«åŸºã¥ã„ã¦ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
        // ================================================
        function maybeEnableButtons() {
            const submitBtn = document.getElementById('submitBtn');
            if (!submitBtn) return;
            
            if (gapiInited && gisInited) {
                console.log('Google APIs ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
                submitBtn.disabled = false;
                submitBtn.textContent = 'ğŸ¬ å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹';
                submitBtn.classList.remove('loading');
                
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€æ™‚è¡¨ç¤º
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'âœ… æº–å‚™å®Œäº†ï¼';
                submitBtn.style.background = 'linear-gradient(135deg, #68d391, #48bb78)';
                setTimeout(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.style.background = 'linear-gradient(135deg, #81c784, #66bb6a)';
                }, 2000);
            } else {
                console.log('Google APIs ã®åˆæœŸåŒ–ã‚’å¾…æ©Ÿä¸­...');
                console.log(`gapiInited: ${gapiInited}, gisInited: ${gisInited}`);
                submitBtn.disabled = true;
                
                if (!gapiInited && !gisInited) {
                    submitBtn.textContent = 'Google Drive APIã«æ¥ç¶šä¸­...';
                } else if (gapiInited && !gisInited) {
                    submitBtn.textContent = 'èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹æº–å‚™ä¸­...';
                } else {
                    submitBtn.textContent = 'æº–å‚™å®Œäº†ã¾ã§ã‚ã¨å°‘ã—...';
                }
                submitBtn.classList.add('loading');
            }
        }
        
        // ================================================
        // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
        // ================================================
        async function getAccessToken() {
            return new Promise((resolve, reject) => {
                tokenClient.callback = async (resp) => {
                    if (resp.error !== undefined) {
                        reject(resp);
                    }
                    resolve(resp.access_token);
                };
                
                if (gapi.client.getToken() === null) {
                    tokenClient.requestAccessToken({prompt: 'consent'});
                } else {
                    tokenClient.requestAccessToken({prompt: ''});
                }
            });
        }

        // ================================================
        // Google Driveã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        // ================================================
        async function uploadToGoogleDrive(file, accessToken, onProgress) {
            if (!file) {
                throw new Error('ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
            }
            
            if (!accessToken) {
                throw new Error('èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            }
            
            try {
                // ãƒ•ã‚©ãƒ«ãƒ€ã®å­˜åœ¨ç¢ºèª
                const folderResponse = await gapi.client.drive.files.get({
                    fileId: UPLOAD_FOLDER_ID,
                    fields: 'id, name, mimeType'
                });
                
                if (folderResponse.result.mimeType !== 'application/vnd.google-apps.folder') {
                    throw new Error('æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€IDã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚');
                }
                
                console.log('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å…ˆãƒ•ã‚©ãƒ«ãƒ€:', folderResponse.result.name);
                
                const metadata = {
                    name: `${new Date().getTime()}_${file.name}`,
                    parents: [UPLOAD_FOLDER_ID]
                };

                const form = new FormData();
                form.append('metadata', new Blob([JSON.stringify(metadata)], {type: 'application/json'}));
                form.append('file', file);

                console.log('ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™...');
                
                return new Promise((resolve, reject) => {
                    const xhr = new XMLHttpRequest();
                    
                    xhr.open('POST', 'https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id', true);
                    xhr.setRequestHeader('Authorization', `Bearer ${accessToken}`);
                    
                    xhr.upload.addEventListener('progress', (e) => {
                        if (e.lengthComputable) {
                            const percentComplete = Math.round((e.loaded / e.total) * 100);
                            console.log(`ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é€²æ—: ${percentComplete}%`);
                            onProgress(percentComplete);
                        }
                    });

                    xhr.onload = function() {
                        if (xhr.status === 200) {
                            try {
                                const response = JSON.parse(xhr.responseText);
                                console.log('ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ:', response);
                                resolve(response);
                            } catch (e) {
                                console.error('ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ:', e);
                                reject(new Error('ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®å¿œç­”ã‚’å‡¦ç†ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚'));
                            }
                        } else {
                            let errorMessage = 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                            try {
                                const errorData = JSON.parse(xhr.responseText);
                                console.error('Google Drive API ã‚¨ãƒ©ãƒ¼è©³ç´°:', errorData);
                                
                                if (errorData.error && errorData.error.message) {
                                    errorMessage += `\n\nâ– ã‚¨ãƒ©ãƒ¼å†…å®¹â– \n${errorData.error.message}`;
                                    
                                    if (errorData.error.message.includes('insufficientFilePermissions')) {
                                        errorMessage += '\n\nã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¯æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚';
                                    } else if (errorData.error.message.includes('quotaExceeded')) {
                                        errorMessage += '\n\nGoogle Driveã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚';
                                    } else if (errorData.error.message.includes('dailyLimitExceeded')) {
                                        errorMessage += '\n\n1æ—¥ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚24æ™‚é–“å¾Œã«å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
                                    }
                                }
                            } catch (e) {
                                console.error('ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ:', e);
                                errorMessage += '\n\nã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’ç‰¹å®šã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';
                            }
                            reject(new Error(errorMessage));
                        }
                    };

                    xhr.onerror = function() {
                        console.error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');
                        reject(new Error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚'));
                    };

                    xhr.send(form);
                });
            } catch (error) {
                console.error('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
                throw error;
            }
        }

        // ================================================
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        // ================================================
        
        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ›
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã‚’è¡¨ç¤º
        function displayMultipleFiles(files) {
            const filesList = document.getElementById('filesList');
            filesList.innerHTML = '';
            
            let hasError = false;
            const maxFileSize = 200 * 1024 * 1024; // 200MB
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const fileItem = document.createElement('div');
                fileItem.className = 'file-info';
                fileItem.style.display = 'block';
                fileItem.style.marginBottom = '10px';
                
                let statusIcon = 'âœ…';
                let statusColor = '#2f855a';
                let errorMsg = '';
                
                // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
                if (file.size > maxFileSize) {
                    statusIcon = 'âŒ';
                    statusColor = '#e53e3e';
                    errorMsg = ' (200MBã‚’è¶…ãˆã¦ã„ã¾ã™)';
                    hasError = true;
                }
                
                fileItem.innerHTML = `
                    <div class="file-name" style="color: ${statusColor};">
                        ${statusIcon} ${file.name}${errorMsg}
                    </div>
                    <div class="file-size" style="color: ${statusColor};">
                        ${formatFileSize(file.size)}
                    </div>
                `;
                
                filesList.appendChild(fileItem);
            }
            
            // 5å‹•ç”»åˆ¶é™ãƒã‚§ãƒƒã‚¯
            if (files.length > 5) {
                const errorDiv = document.createElement('div');
                errorDiv.style.color = '#e53e3e';
                errorDiv.style.fontSize = '14px';
                errorDiv.style.marginTop = '10px';
                errorDiv.textContent = 'âš ï¸ å‹•ç”»ã¯5ã¤ã¾ã§ã—ã‹é¸æŠã§ãã¾ã›ã‚“';
                filesList.appendChild(errorDiv);
                hasError = true;
            }
            
            if (hasError) {
                document.getElementById('videoFileError').textContent = 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¾ãŸã¯å€‹æ•°ã«å•é¡ŒãŒã‚ã‚Šã¾ã™';
                document.getElementById('videoFileError').style.display = 'block';
                return false;
            } else {
                document.getElementById('videoFileError').style.display = 'none';
                return true;
            }
        }

        // ================================================
        // DOMè¦ç´ ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        // ================================================
        
        // DOMè¦ç´ ã®å–å¾—
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('videoFile');
        const fileInfo = document.getElementById('filesList');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const form = document.getElementById('uploadForm');
        const submitBtn = document.getElementById('submitBtn');
        const thanksScreen = document.getElementById('thanksScreen');

        // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('video/'));
            
            if (files.length > 0) {
                const selectedFiles = files.slice(0, 5);
                
                const dt = new DataTransfer();
                selectedFiles.forEach(file => dt.items.add(file));
                fileInput.files = dt.files;
                
                displayMultipleFiles(selectedFiles);
            } else {
                alert('å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
            }
        });

        // ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®å‡¦ç†
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                const files = Array.from(e.target.files).slice(0, 5);
                displayMultipleFiles(files);
            }
        });

        // ================================================
        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
        // ================================================
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            let isValid = true;
            const userName = document.getElementById('userName');
            const videoDescription = document.getElementById('videoDescription');
            const videoFile = document.getElementById('videoFile');
            
            // å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
            
            if (!userName.value.trim()) {
                document.getElementById('userNameError').style.display = 'block';
                isValid = false;
            }
            
            if (!videoDescription.value.trim()) {
                document.getElementById('videoDescriptionError').style.display = 'block';
                isValid = false;
            }
            
            if (!videoFile.files.length) {
                document.getElementById('videoFileError').textContent = 'å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„';
                document.getElementById('videoFileError').style.display = 'block';
                isValid = false;
            }

            if (!isValid) return;

            try {
                // Google APIã®åˆæœŸåŒ–ãƒã‚§ãƒƒã‚¯
                if (!gapiInited || !gisInited) {
                    throw new Error('Google APIãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                }
                
                // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†é–‹å§‹
                submitBtn.disabled = true;
                submitBtn.textContent = 'Google Driveã«æ¥ç¶šä¸­...';
                
                // Google Driveèªè¨¼
                const accessToken = await getAccessToken();
                
                submitBtn.textContent = 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...';
                progressBar.style.display = 'block';
                
                // è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
                const uploadResults = [];
                const totalFiles = videoFile.files.length;
                
                for (let i = 0; i < totalFiles; i++) {
                    const file = videoFile.files[i];
                    submitBtn.textContent = `ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­... (${i + 1}/${totalFiles})`;
                    
                    const uploadResult = await uploadToGoogleDrive(
                        file, 
                        accessToken,
                        (progress) => {
                            const overallProgress = ((i / totalFiles) + (progress / 100 / totalFiles)) * 100;
                            progressFill.style.width = overallProgress + '%';
                        }
                    );
                    
                    uploadResults.push(uploadResult);
                }
                
                // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†
                progressFill.style.width = '100%';
                
                // å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                submitBtn.textContent = 'âœ… ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ï¼';
                submitBtn.style.background = 'linear-gradient(135deg, #68d391, #48bb78)';
                
                // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°å‡ºåŠ›
                const formData = {
                    userName: userName.value,
                    videoDescription: videoDescription.value,
                    files: uploadResults.map((result, index) => ({
                        fileName: videoFile.files[index].name,
                        fileSize: formatFileSize(videoFile.files[index].size),
                        googleDriveFileId: result.id
                    })),
                    uploadTime: new Date().toISOString()
                };
                
                console.log('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†:', formData);
                
                // å°‘ã—å¾…ã£ã¦ã‹ã‚‰å®Œäº†ç”»é¢ã«é·ç§»
                setTimeout(() => {
                    submitBtn.textContent = 'Google Driveã§å®‰å…¨ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸ';
                }, 1000);
                
                setTimeout(() => {
                    form.style.display = 'none';
                    thanksScreen.style.display = 'block';
                }, 2500);
                
            } catch (error) {
                console.error('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã®è©³ç´°:', error);

                let errorMessage = 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ã§ã™ã€‚';
                
                if (error && error.result && error.result.error && error.result.error.message) {
                    errorMessage = error.result.error.message;
                } else if (error && error.message) {
                    errorMessage = error.message;
                } else {
                    try {
                        errorMessage = JSON.stringify(error);
                    } catch (e) {
                        errorMessage = 'ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';
                    }
                }

                alert('ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nâ– ã‚¨ãƒ©ãƒ¼å†…å®¹â– \n' + errorMessage);

                submitBtn.disabled = false;
                submitBtn.textContent = 'ğŸ¬ å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹';
                submitBtn.style.background = 'linear-gradient(135deg, #81c784, #66bb6a)';
                progressBar.style.display = 'none';
            }
        });

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†
        window.addEventListener('load', () => {
            console.log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
        });
    </script>
</body>
</html>